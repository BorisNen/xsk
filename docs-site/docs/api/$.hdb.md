---
title: $.hdb
---

$.hdb
===

$.hdb namespace provides means for seamless HANA database access. It is intended to be a replacement for the older $.db namespace. The fundamental goal of the new interface is to ensure simplicity, convenience, completeness, and performance.

=== "Overview"
- Definition: [https://github.com/SAP/xsk/issues/14](https://github.com/SAP/xsk/issues/14)
- Module: [hdb/hdb.js](https://github.com/SAP/xsk/blob/main/modules/api/api-xsjs/src/main/resources/xsk/hdb/hdb.js)
- Status: `alpha`

###Basic Usage

```javascript
var db = $.hdb;
var response = require('http/v4/response');

var tableName = "CARS";

try {
    var connection = db.getConnection();

    // Make sure to create the table only once
    connection.executeUpdate("CREATE TABLE " + tableName + " (MAKE varchar(255), MODEL varchar(255))");

    var rows = connection.executeUpdate("INSERT INTO " + tableName +  
                                                      " (MAKE, MODEL) VALUES ('BMW', '325'), ('HONDA', 'ACCORD');");
    response.println("Query OK, " + rows + " rows affected\n");

 var result = connection.executeQuery('SELECT * FROM '+ tableName);
 var iterator = result.getIterator();
 var metadata = result.metadata.columns;
 var columnCount = metadata.length;
 var totalText ="";
 
 while(iterator.next()) {
    var currentRow = iterator.value();
    var text = "\n" + metadata[0].name + ": "+ currentRow[metadata[0].name] + "\n" + metadata[1].name+ ": "+ currentRow[metadata[1].name] + "\n";
    response.println(text);
}


} catch(e) {
    connection.rollback();
    response.println("Transaction was rolled back: " + e.message);
} finally {
       connection.close();
}

response.flush();
response.close();
```

>

### Coverage

### $.hdb

| Method      | Description                                            | Status |
|--------------|--------------------------------------------------------|:--------:|
| getConnection()         | Returns a connection to the database        |   ✅ |

### Members
| Members| Description                                            | Type |
|--------------|--------------------------------------------------------|:--------:|
| isolation | Constants that represent the isolation levels for a transaction|      |
|types | Set of constants of the database column types. The JavaScript Type column below describes the implicit Database to JavaScript type convertions performed by the $.hdb API|     |

#### Isolation Properties

| Name| Type                                            | Default |
|--------------|--------------------------------------------------------|:--------:|
| READ_COMITTED| number|2      |
|REPEATABLE_READ	| number|4     |
| SERIALIZABLE | number|8    |

#### Types
<table class="props">
<thead>
<tr>
<th>Name</th>
<th>Value</th>
<th>JavaScript Type</th>
<th>Comment</th>
</tr>
</thead>
<tbody>
<tr>
<td><code class="name">TINYINT</code></td>
<td>1</td>
<td>Number</td>
<td></td>
</tr>
<tr>
<td><code class="name">SMALLINT</code></td>
<td>2</td>
<td>Number</td>
<td></td>
</tr>
<tr>
<td><code class="name">INTEGER</code></td>
<td>3</td>
<td>Number</td>
<td></td>
</tr>
<tr>
<td><code class="name">BIGINT</code></td>
<td>4</td>
<td>ctypes.Int64</td>
<td></td>
</tr>
<tr>
<td><code class="name">DECIMAL</code></td>
<td>5</td>
<td>String</td>
<td></td>
</tr>
<tr>
<td><code class="name">REAL</code></td>
<td>6</td>
<td>Number</td>
<td></td>
</tr>
<tr>
<td><code class="name">DOUBLE</code></td>
<td>7</td>
<td>Number</td>
<td></td>
</tr>
<tr>
<td><code class="name">CHAR</code></td>
<td>8</td>
<td>String</td>
<td></td>
</tr>
<tr>
<td><code class="name">VARCHAR</code></td>
<td>9</td>
<td>String</td>
<td></td>
</tr>
<tr>
<td><code class="name">NCHAR</code></td>
<td>10</td>
<td>String</td>
<td></td>
</tr>
<tr>
<td><code class="name">NVARCHAR</code></td>
<td>11</td>
<td>String</td>
<td></td>
</tr>
<tr>
<td><code class="name">BINARY</code></td>
<td>12</td>
<td>ArrayBuffer</td>
<td></td>
</tr>
<tr>
<td><code class="name">VARBINARY</code></td>
<td>13</td>
<td>ArrayBuffer</td>
<td></td>
</tr>
<tr>
<td><code class="name">DATE</code></td>
<td>14</td>
<td>Date</td>
<td></td>
</tr>
<tr>
<td><code class="name">TIME</code></td>
<td>15</td>
<td>Date</td>
<td></td>
</tr>
<tr>
<td><code class="name">TIMESTAMP</code></td>
<td>16</td>
<td>Date</td>
<td></td>
</tr>
<tr>
<td><code class="name">CLOB</code></td>
<td>25</td>
<td>String</td>
<td></td>
</tr>
<tr>
<td><code class="name">NCLOB</code></td>
<td>26</td>
<td>String</td>
<td></td>
</tr>
<tr>
<td><code class="name">BLOB</code></td>
<td>27</td>
<td>ArrayBuffer</td>
<td></td>
</tr>
<tr>
<td><code class="name">SMALLDECIMAL</code></td>
<td>47</td>
<td>String</td>
<td></td>
</tr>
<tr>
<td><code class="name">TEXT</code></td>
<td>51</td>
<td>ArrayBuffer</td>
<td></td>
</tr>
<tr>
<td><code class="name">SHORTTEXT</code></td>
<td>52</td>
<td>String</td>
<td></td>
</tr>
<tr>
<td><code class="name">ALPHANUM</code></td>
<td>55</td>
<td>String</td>
<td></td>
</tr>
<tr>
<td><code class="name">SECONDDATE</code></td>
<td>62</td>
<td>Date</td>
<td></td>
</tr>
<tr>
<td><code class="name">ST_GEOMETRY</code></td>
<td>74</td>
<td>ArrayBuffer</td>
<td>consider using SQL's ST_asGeoJSON() on ST_GEOMETRY columns for easy consumption</td>
</tr>
<tr>
<td><code class="name">ST_POINT</code></td>
<td>75</td>
<td>ArrayBuffer</td>
<td>consider using SQL's ST_asGeoJSON() on ST_POINT columns for easy consumption</td>
</tr>
</tbody>
</table>


#### $.hdb.Connection

| Method| Description                                            | Status |
|--------------|--------------------------------------------------------|:--------:|
| close() | Closes the connection.                              |    :warning:   |
| commit()| Commits the changes. |   :warning:   |
| isClosed()| Checks if the connection is closed.                        |    :warning:   |
| executeQuery(query, arguments(optional))| Executes a database query. The query string is prepared and the additional arguments are applied as statement parameters, before the statement is executed.                |    ✅   |
| executeUpdate(statement, arguments(optional))| Executes a SQL statement, which changes the database state. SELECT and CALL statements are not allowed here. The query string is prepared and the additional arguments are applied as statement parameters, before the statement is executed.                    |      ✅  |
| rollback()| Rolls back the changes.                        |     :warning:  |
| setAutoCommit(enable)| Changes the auto-commit flag of the connection                        |     :warning:   |

#### $.hdb.ResultSet()


| Members| Description                                            | Type |
|--------------|--------------------------------------------------------|:--------:|
| lenght | The number of rows in the $.hdb.ResultSet object|    number  |
| metadata | Returns the ResultSetMetaData from $.hdb.ResultSet object.|    ResultSetMetaData  |

| Method| Description                                            | Type |
|--------------|--------------------------------------------------------|:--------:|
| getIterator() | Returns an iterator over this result set.|   ResultSetIterator|

#### $.hdb.ResultSetIterator

| Method| Description                                            | Type |
|--------------|--------------------------------------------------------|:--------:|
| next() | Checks if the underlying $.hdb.ResultSet has more rows and sets the value of the iterator to the next row if it exists.|   Boolean|
| value() | Returns the current row that the iterator's value is set to. Should always be called after a call to next();|  `Row of a $.hdb.ResultSet.`|

#### $.hdb.ResultSetMetaData
Represents the metadata of a result set.

| Members| Description                                            | Type |
|--------------|--------------------------------------------------------|:--------:|
| column | Returns an array of $.hdb.ColumnMetadata objects, each of which represents the metadata for a particular column.|    Array  |

### $.hdb. ColumnMetadata
Represents the metadata of a single column from a result set.

* Sample usage:
```javascript
var conn = $.hdb.getConnection();
conn.executeUpdate('CREATE SCHEMA EXAMPLE');
conn.executeUpdate('CREATE TABLE EXAMPLE.TEST_METADATA( TINT TINYINT NOT NULL, FLOAT FLOAT )');
conn.executeUpdate('INSERT INTO EXAMPLE.TEST_METADATA VALUES(12, 34.5)');
conn.commit();
var resultSet = conn.executeQuery('SELECT * FROM EXAMPLE.TEST_METADATA');
var columnsMetadata = resultSet.metadata.columns;
var columnCount = columnsMetadata.length;
var body = "";
for(var i = 0; i < columnCount; i++) {
    body += "Column " + (i + 1) + " metadata:\n";
    body += "  Catalog name: " + columnsMetadata[i].catalogName + "\n";
    body += "  Display size: " + columnsMetadata[i].displaySize + "\n";
    body += "  Label:        " + columnsMetadata[i].label + "\n";
    body += "  Name:         " + columnsMetadata[i].name + "\n";
    body += "  Type:         " + columnsMetadata[i].type + "\n";
    body += "  Type name:    " + columnsMetadata[i].typeName + "\n";
    body += "  Precision:    " + columnsMetadata[i].precision + "\n";
    body += "  Scale:        " + columnsMetadata[i].scale + "\n";
    body += "  Table name:   " + columnsMetadata[i].tableName + "\n";
    body += "  Is nullable:  " + (columnsMetadata[i].isNullable ? "true" : "false") + "\n\n";
}

conn.executeUpdate('DROP TABLE EXAMPLE.TEST_METADATA');
conn.executeUpdate('DROP SCHEMA EXAMPLE');
$.response.contentType = "text/plain";
$.response.setBody(body);
```

| Members| Description                                            | Type |
|--------------|--------------------------------------------------------|:--------:|
| catalogName | Returns the column's catalog name.|    String  |
| displaySize | Returns the column's display size.|    Number  |
| isNullable | Returns true if the column is nullable and false otherwise.|    Number  |
| label | Returns the column's label.|    String  |
| precision | Returns the column's name.|    String  |
| scale | Returns the column's scale.|    String  |
| tableName | Returns the name of the table to which the column belongs.|    String  |
| type | Returns the column's type.|    String  |
| typeName | Returns the column's type name.|    `$.hdb.types`  |
